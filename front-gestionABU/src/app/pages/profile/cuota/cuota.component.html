<mat-accordion class="cuota" multi *ngFor="let cuota of resultado_busqueda">
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{cuota.nombre_socio}}
      </mat-panel-title>
      <mat-panel-description>
        Estado: {{cuota.estado}}
      </mat-panel-description>
      <mat-panel-description>
        Cuota del: {{cuota.mes_anio}}
      </mat-panel-description>
      <mat-panel-description>
        Importe: {{cuota.importe | currency}}
      </mat-panel-description>
      <mat-icon class="icon">account_circle</mat-icon>
    </mat-expansion-panel-header>

    <!-- Si es administrador muestro para registrar pago -->
    <ng-container *ngIf="true" [ngTemplateOutlet]="registrarPago"  [ngTemplateOutletContext]="{cuota:cuota}"></ng-container>

  </mat-expansion-panel>
</mat-accordion>

<!-- Vista para los administradores -->
<ng-template #registrarPago let-cuota="cuota">
  <form [formGroup]="datos_pago" (submit)="pagar(cuota.id, cuota.id_socio)" >
    <mat-form-field appearance="fill">
      <mat-label>Metodo de pago</mat-label>
      <mat-select formControlName="metodo_pago" required>
        <mat-option *ngFor="let metodo of metodos" [value]="metodo.id">
          {{metodo.descripcion}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill" >
      <mat-label>Referencia de pago</mat-label>
      <input matInput formControlName="descripcion">
    </mat-form-field>

    <button type="submit" mat-button matRipple class="buscador_btn">Registrar Pago</button>
  </form>
</ng-template>

<!-- FIN Vista para los administradores -->

